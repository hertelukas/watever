# NOTE: Do not autogenerate
# SPDX-FileCopyrightText: 2025 Contributors to TPDE <https://tpde.org>
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception

# RUN: python3 %s 2000 | watever -l 0 | wasm2wat - | FileCheck %s

# CHECK: func $f

import sys

print('target datalayout = "e-m:e-p:32:32-p10:8:8-p20:8:8-i64:64-i128:128-n32:64-S128-ni:1:10:20"')
print('target triple = "wasm32-unknown-unknown"')

n = int(sys.argv[1])
print("define void @f(i64 %c, ptr %p) {")
print("  switch i64 %c, label %d [")
for i in range(n):
    print(f"    i64 {i}, label %h{i}")
print(f"  ]")
for i in range(n):
    print(f'h{i}:')
    print(f'  store i64 {i*i}, ptr %p')
    print(f'  ret void')
print('d:')
print('  ret void')
print('}')
